# =============================================================================
# Airy Backend Configuration
# =============================================================================
# Copy this file to .env and modify the values for your environment.
# IMPORTANT: Never commit .env file with real credentials to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
SERVER_HOST=0.0.0.0
SERVER_PORT=8080
# Options: debug, release, test
GIN_MODE=debug

# -----------------------------------------------------------------------------
# Database Configuration (MySQL)
# -----------------------------------------------------------------------------
DB_HOST=localhost
DB_PORT=3306
DB_NAME=airy
DB_USER=airy
DB_PASSWORD=airy
# Connection pool settings
DB_MAX_IDLE_CONNS=10
DB_MAX_OPEN_CONNS=100
# Connection max lifetime in seconds
DB_CONN_MAX_LIFETIME=3600
DB_INIT_LOCK_FILE=./data/db_init.lock
DB_SQL_INIT_LOCK_FILE=./data/db_sql_init.lock

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis_KKKsFD
REDIS_DB=0

# -----------------------------------------------------------------------------
# Elasticsearch Configuration
# -----------------------------------------------------------------------------
ES_HOST=localhost
ES_PORT=9200

# -----------------------------------------------------------------------------
# JWT Configuration
# -----------------------------------------------------------------------------
# IMPORTANT: Change this to a secure random string in production!
# Generate with: openssl rand -hex 32
JWT_SECRET=your-secret-key-change-in-production
# Token expiration in seconds (default: 24 hours)
JWT_EXPIRATION=86400

# -----------------------------------------------------------------------------
# Message Queue Configuration (RabbitMQ)
# -----------------------------------------------------------------------------
MQ_HOST=localhost
MQ_PORT=5672
MQ_USER=guest
MQ_PASSWORD=guest

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Options: debug, info, warn, error
LOG_LEVEL=info
# Options: stdout, file
LOG_OUTPUT=file
LOG_FILE_PATH=logs/app.log

# -----------------------------------------------------------------------------
# Goroutine Pool Configuration
# -----------------------------------------------------------------------------
GOROUTINE_POOL_SIZE=10000

# -----------------------------------------------------------------------------
# Cache Configuration
# -----------------------------------------------------------------------------
# Default cache expiration in seconds
CACHE_DEFAULT_EXPIRATION=3600
# Cache cleanup interval in seconds
CACHE_CLEANUP_INTERVAL=600
# Cache warmup settings
CACHE_WARMUP_ENABLED=true
CACHE_WARMUP_HOT_POSTS=100
CACHE_WARMUP_HOT_USERS=50
CACHE_WARMUP_HOT_CIRCLES=20
# Warmup refresh interval in minutes
CACHE_WARMUP_REFRESH_INTERVAL=30
CACHE_WARMUP_CONCURRENCY=10

# -----------------------------------------------------------------------------
# Content Moderation Configuration
# -----------------------------------------------------------------------------
MODERATION_API_URL=https://api.example.com/moderation
MODERATION_API_KEY=your-api-key

# -----------------------------------------------------------------------------
# Email Configuration (SMTP)
# -----------------------------------------------------------------------------
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=noreply@example.com
SMTP_PASSWORD=password
SMTP_FROM=noreply@example.com

# -----------------------------------------------------------------------------
# Feed Configuration
# -----------------------------------------------------------------------------
# Follower threshold for fan-out vs fan-in strategy
FEED_FANOUT_THRESHOLD=1000

# -----------------------------------------------------------------------------
# Hotness Ranking Configuration
# -----------------------------------------------------------------------------
# Options: reddit, hackernews
HOTNESS_ALGORITHM=reddit

# -----------------------------------------------------------------------------
# Rate Limiting Configuration
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_SECOND=100
RATE_LIMIT_BURST_SIZE=200

# -----------------------------------------------------------------------------
# TLS/HTTPS Configuration
# -----------------------------------------------------------------------------
# Enable TLS for secure communication (recommended for production)
TLS_ENABLED=false
TLS_CERT_FILE=/path/to/cert.pem
TLS_KEY_FILE=/path/to/key.pem

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# Base64-encoded AES encryption key for sensitive data (32 bytes for AES-256)
# Generate with: openssl rand -base64 32
ENCRYPTION_KEY=
# Bcrypt cost factor for password hashing (4-31, default 10)
BCRYPT_COST=10

# -----------------------------------------------------------------------------
# Feature Toggles (useful for local development)
# -----------------------------------------------------------------------------
# Set to false to skip external services when running locally
ENABLE_DATABASE=true
ENABLE_REDIS=true
ENABLE_DB_AUTO_CREATE=true
ENABLE_DB_AUTO_MIGRATE=true

# -----------------------------------------------------------------------------
# CSRF Configuration
# -----------------------------------------------------------------------------
# CSRF token length in bytes
CSRF_TOKEN_LENGTH=32
# CSRF token expiration in seconds (default: 24 hours)
CSRF_TOKEN_EXPIRATION=86400
# CSRF cookie name
CSRF_COOKIE_NAME=_csrf
# CSRF header name
CSRF_HEADER_NAME=X-CSRF-Token
# CSRF form field name
CSRF_FORM_FIELD_NAME=_csrf
# CSRF cookie secure flag (set to true in production with HTTPS)
CSRF_SECURE=false
# CSRF SameSite attribute: Strict, Lax, None
CSRF_SAME_SITE=Strict

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Allowed origins (comma-separated, use * for all origins - not recommended for production)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
# Allowed HTTP methods (comma-separated)
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
# Allowed headers (comma-separated)
CORS_ALLOWED_HEADERS=Origin,Content-Type,Accept,Authorization,X-CSRF-Token
# Exposed headers (comma-separated)
CORS_EXPOSED_HEADERS=Content-Length,Content-Type
# Allow credentials
CORS_ALLOW_CREDENTIALS=true
# Max age for preflight cache in seconds
CORS_MAX_AGE=86400

# -----------------------------------------------------------------------------
# Application URLs
# -----------------------------------------------------------------------------
# Base URL for the application (used in emails, etc.)
APP_BASE_URL=http://localhost:8080
# Frontend URL (for CORS and redirects)
FRONTEND_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# Activation Token Configuration
# -----------------------------------------------------------------------------
# Activation token expiration in seconds (default: 24 hours)
ACTIVATION_TOKEN_EXPIRATION=86400
# Password reset token expiration in seconds (default: 1 hour)
PASSWORD_RESET_TOKEN_EXPIRATION=3600
# Verification code expiration in seconds (default: 5 minutes)
VERIFICATION_CODE_EXPIRATION=300
